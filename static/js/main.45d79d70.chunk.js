(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(7),i=n.n(r),s=(n(15),n(1)),l=n(2),c=n(4),u=n(3),m=n(5),d=(n(16),function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(u.a)(e).call(this))).state={expanded:!1},t}return Object(m.a)(e,t),Object(l.a)(e,[{key:"toggle",value:function(){this.setState({expanded:!this.state.expanded}),console.log("toggle inner")}},{key:"render",value:function(){var t,e=this;if(this.state.expanded){var n="";for(var a in this.props.artist.genres)n+=this.props.artist.genres[a]+", ";t=o.a.createElement("div",{className:"expanded_artist"},o.a.createElement("section",{className:"img_box"},o.a.createElement("img",{src:this.props.artist.images[0].url})),o.a.createElement("div",{className:"artist_details"},o.a.createElement("h1",{id:"expanded_title"},this.props.artist.name),o.a.createElement("p",{id:"expand_details"},"Followers: ",this.props.artist.followers.total),o.a.createElement("p",{id:"expand_details"},"Genres: ",n)),o.a.createElement("a",{id:"spotify_link_button",href:this.props.artist.external_urls.spotify,title:"Go to artist's spotify page"},o.a.createElement("i",{className:"fa fa-spotify fa-2x"})))}else t=o.a.createElement("div",{className:"unexpanded_artist_title"},o.a.createElement("p",null,this.props.artist.name));return o.a.createElement("div",{className:"Artist",onClick:function(){return e.toggle()}},t)}}]),e}(o.a.Component)),p=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(u.a)(e).call(this))).state={},t}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"login_container"},o.a.createElement("h1",{id:"main_title"},"Statify"),o.a.createElement("p",{className:"login_info_text"},"This application uses your spotify user listening information to provide statistics on your top artists. Spotify's own login service is used for authentication. To find out your listening info click the button below and log in to your account."),o.a.createElement("button",{className:"login_button",onClick:this.props.redirect},"GO TO SPOTIFY LOGIN"))}}]),e}(o.a.Component),h=n(8),f=new(n.n(h).a),g=function(t){function e(){var t;Object(s.a)(this,e);var n=(t=Object(c.a)(this,Object(u.a)(e).call(this))).getHashParams().access_token;return n&&(console.log("got token"),f.setAccessToken(n)),t.state={loggedIn:!!n,nowPlaying:{name:"Not Checked",albumArt:""},topArtists:[],nresults:"50",time_range:"short_term",expand_all:!1},t}return Object(m.a)(e,t),Object(l.a)(e,[{key:"getHashParams",value:function(){for(var t,e={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);t=n.exec(a);)e[t[1]]=decodeURIComponent(t[2]);return e}},{key:"getData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.time_range;this.state.loggedIn&&f.getMyTopArtists({time_range:e,limit:this.state.nresults}).then(function(e){return t.setState({topArtists:e.items})}),console.log("api call")}},{key:"getArtistPictures",value:function(){var t="";if(this.state.loggedIn){for(var e=this.state.topArtists,n=[],a=0;a<e.length;a++)n.push(e[a].images[0].url);t=n.map(function(t){return o.a.createElement("img",{src:t})})}return t}},{key:"makeArtists",value:function(){return this.state.topArtists.map(function(t){return o.a.createElement(d,{artist:t})})}},{key:"toggle",value:function(){this.setState({expand_all:!this.state.expand_all})}},{key:"generateRandomString",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}},{key:"handleResults",value:function(t){this.setState({time_range:t}),this.getData(t)}},{key:"scrollFunction",value:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"componentDidMount",value:function(){var t=this;Object({NODE_ENV:"production",PUBLIC_URL:"/Statify"}).BROWSER&&document.addEventListener("scroll",function(e){return t._handleOnScrollDocument(e)},!0)}},{key:"redirect",value:function(){var t=this.generateRandomString(16);localStorage.setItem("spotify_auth_state",t);var e="https://accounts.spotify.com/authorize";e+="?response_type=token",e+="&client_id="+encodeURIComponent("d8c9e8ca3c784898bdf939f51ff6136f"),e+="&scope="+encodeURIComponent("user-top-read"),e+="&redirect_uri="+encodeURIComponent("https://jake-good.github.io/Statify/"),e+="&state="+encodeURIComponent(t),window.location=e}},{key:"render",value:function(){var t,e,n,a=this;return console.log("re render"),this.state.loggedIn?(t=this.makeArtists(this.state.expand_all),e=o.a.createElement("header",null,o.a.createElement("h1",{id:"main_title"},"Statify"),o.a.createElement("h2",{id:"sub_title"},"How recent do you want your statistics?"),o.a.createElement("div",{className:"button_container"},o.a.createElement("button",{onClick:function(){return a.handleResults("short_term")}},"1 month"),o.a.createElement("button",{onClick:function(){return a.handleResults("medium_term")}},"3 months"),o.a.createElement("button",{onClick:function(){return a.handleResults("long_term")}},"Several years")),n)):t=o.a.createElement("div",null,o.a.createElement(p,{redirect:function(){return a.redirect()}})),(document.body.scrollTop>20||document.documentElement.scrollTop>20)&&(n=o.a.createElement("button",{title:"Return to top ",className:"expand_button",onClick:function(){return a.scrollFunction()}},o.a.createElement("i",{className:"fa fa-angle-up fa-2x"})),console.log("scrolled")),o.a.createElement("div",{className:"App"},e,t)}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(17);i.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,n){t.exports=n(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.45d79d70.chunk.js.map