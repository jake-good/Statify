(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),s=n.n(o),i=(n(15),n(1)),l=n(2),c=n(4),u=n(3),m=n(5),d=(n(16),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={expanded:!1},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(){this.setState({expanded:!this.state.expanded}),console.log("toggle inner")}},{key:"render",value:function(){var e,t=this;if(this.state.expanded){var n="";for(var a in this.props.artist.genres)n+=this.props.artist.genres[a]+", ";e=r.a.createElement("div",{className:"expanded_artist"},r.a.createElement("section",{className:"img_box"},r.a.createElement("img",{src:this.props.artist.images[0].url})),r.a.createElement("div",{className:"artist_details"},r.a.createElement("h1",{id:"expanded_title"},this.props.artist.name),r.a.createElement("p",{id:"expand_details"},"Number of followers: ",this.props.artist.followers.total),r.a.createElement("p",{id:"expand_details"},"Genres: ",n),r.a.createElement("p",{id:"expand_details"},r.a.createElement("a",{href:this.props.artist.external_urls.spotify},r.a.createElement("span",null,"View the artists Spotify page")))))}else e=r.a.createElement("div",{className:"unexpanded_artist_title"},r.a.createElement("p",null,this.props.artist.name));return r.a.createElement("div",{className:"Artist",onClick:function(){return t.toggle()}},e)}}]),t}(r.a.Component)),p=n(8),h=new(n.n(p).a),g=function(e){function t(){var e;Object(i.a)(this,t);var n=(e=Object(c.a)(this,Object(u.a)(t).call(this))).getHashParams().access_token;return n&&(console.log("got token"),h.setAccessToken(n)),e.state={loggedIn:!!n,nowPlaying:{name:"Not Checked",albumArt:""},topArtists:[],nresults:"50",time_range:"short_term",expand_all:!1},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getHashParams",value:function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);e=n.exec(a);)t[e[1]]=decodeURIComponent(e[2]);return t}},{key:"getData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.time_range;this.state.loggedIn&&h.getMyTopArtists({time_range:t,limit:this.state.nresults}).then(function(t){return e.setState({topArtists:t.items})}),console.log("api call")}},{key:"getArtistPictures",value:function(){var e="";if(this.state.loggedIn){for(var t=this.state.topArtists,n=[],a=0;a<t.length;a++)n.push(t[a].images[0].url);e=n.map(function(e){return r.a.createElement("img",{src:e})})}return e}},{key:"makeArtists",value:function(){return this.state.topArtists.map(function(e){return r.a.createElement(d,{artist:e})})}},{key:"toggle",value:function(){this.setState({expand_all:!this.state.expand_all})}},{key:"generateRandomString",value:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}},{key:"handleResults",value:function(e){this.setState({time_range:e}),this.getData(e)}},{key:"scrollFunction",value:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"redirect",value:function(){var e=this.generateRandomString(16);localStorage.setItem("spotify_auth_state",e);var t="https://accounts.spotify.com/authorize";t+="?response_type=token",t+="&client_id="+encodeURIComponent("d8c9e8ca3c784898bdf939f51ff6136f"),t+="&scope="+encodeURIComponent("user-top-read"),t+="&redirect_uri="+encodeURIComponent("http://localhost:3000"),t+="&state="+encodeURIComponent(e),window.location=t}},{key:"render",value:function(){var e,t=this;return console.log("re render"),e=this.state.loggedIn?this.makeArtists(this.state.expand_all):r.a.createElement("button",{type:"button",onClick:function(){return t.redirect()}},"Log in to Spotify"),r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",{id:"main_title"},"Statify"),r.a.createElement("h2",{id:"sub_title"},"How recent do you want your statistics?"),r.a.createElement("div",{className:"button_container"},r.a.createElement("button",{onClick:function(){return t.handleResults("short_term")}},"1 month"),r.a.createElement("button",{onClick:function(){return t.handleResults("medium_term")}},"3 months"),r.a.createElement("button",{onClick:function(){return t.handleResults("long_term")}},"Several years")),r.a.createElement("button",{title:"Return to top",className:"expand_button",onClick:function(){return t.scrollFunction()}},r.a.createElement("i",{className:"fa fa-angle-up fa-2x"}))),e)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(17);s.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){e.exports=n(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.54b20bbc.chunk.js.map